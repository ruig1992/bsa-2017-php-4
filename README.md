Binary Studio Academy PHP 2017
====

### Домашнее задание #4

#### Требования
Это задание направлено на проектировние архитектуры приложения с использованием
принципов ООП и паттернов проектирования. В частности затрагивается обработка
команд и ошибок, управление состоянием и жизненным циклом объектов, геймификация.


***

#### Установка

Установка показана в рабочем окружении OS Linux:

```bash
git clone git@github.com:BinaryStudioAcademy/bsa-2017-php-4.git
cd bsa-2017-php-4
composer install
```

Мы рекомендум использовать Homestead.

#### Задание

Реализовать игру с консольным интерфейсом по следующему описанию:

Представьте себе себе, что вы оказались в лабиринте/здании, замке/уровне с множеством комнат.
Для того чтобы выбраться из **комнаты** нужно собрать 5 **монет**.

Допустим, что план здания, в котором вы появляетесь, следующий:

hall - зал (1 - coin)  
basement - подвал (2 - coins)  
corridor - коридор (0 - coin)  
cabinet - кабинет (1 - coins)  
bedroom - спальня (1 - coins)  

Из corridor можно попасть в: hall, cabinet, bedroom.  
Из hall можно попасть в basement, corridor.  
Из basement можно попасть в hall, cabinet.  
Из cabinet можно идти в corridor.  
Из bedroom можно идти также в corridor.  

Игрок появляется в **hall**.

**Игра заканчивается когда игрок собирает 5 монет или по команде exit.**

Ваша основная задача: реализовать консольный интерфейс управления этой игрой со следующими
**командами** (данные хранятся в памяти):  

`where` - показывает информацию о текущей комнате и возможном маршруте.  
`status` - показывает информацию о кол-ве собранных монет и текущей комнате.  
`help` - показывает список доступных команд.  
`go <room>` - переход в комнату. Нет комнаты или нет хода - ошибка.  
`observe` - ищет монеты в комнате. И если они есть выдаёт информацию о наличии монет в комнате.  
`grab` - берет одну монету из текущей комнаты и складывает в ваш инвентарь. Если в комнате нет монет - ошибка.  
`exit` - выходит из игры.  

Ввод несуществующей команды - ошибка.

Предусмотреть расширяемость функциональности игры другими комнатами, командами, предметами.

Результат выполнения команд отображается на экране соответвующим сообщением.
Например, при вводе команды `status`:

`You're at hall. You have 0 coins.`

Формат остальных сообщений содержится в файле `GameTest.php`.

##### Режимы игры

Вам предстоить реализовать 2 режима:

* `run(Reader $reader, Writer $writer)` - запускает игру в пошаговом режиме.
Необходим для тестирования. В этом режиме **игровой мир** (игрок, комнаты и т.д)
должны создаваться только один раз, т.к. для выполения команд важно его предыдущее состояние. (Например, из комнаты, в которой уже нет монет, нельзя попытаться взять монету)

* `start(Reader $reader, Writer $writer)` - запускает игру в цикле и опрашивает пользовательский ввод.
В этому случае **игровой мир** также создаётся единожды.
Выход из цикла возможен по команде `exit` или когда будет собрано 5 монет.
Это основной режим игры.

Часть класса `Game` а также примеры релизации `Reader` и `Writer` прилагаюся.


#### Проверка

Работоспособность игры проверяется в 2 этапа.

* Запуск файла `game.php` должен позволять играть в игру используя консольный ввод.
Должно быть предложение на ввод команд и их соответвующая обработка до условия конца игры.
(см. выше). В игру можно выиграть :D.

* Как и в первом задании свои решения можно проверить запустив тесты PHPUnit.

Все тесты:

```bash
./vendor/bin/phpunit
```
***

#### Приём решений

В идеале разместить ваше решение в отдельном репозитории или форке текущего на Github или Bitbucket
и прислать ссылку на него.
